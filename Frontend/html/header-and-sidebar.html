<header>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand link-light ms-5" href="landing.html">Настольный</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="mx-auto d-flex justify-content-between">
                    <form class="form-inline" id="searchForm">
                        <input class="form-control flex-grow-1" type="search" placeholder="Название товара"
                               aria-label="Search" id="searchInput">
                    </form>
                    <button class="btn btn-outline-light my-sm-0" id="enterButton">Поиск</button>
                </div>
                <a class="me-4 link-underline-opacity-0  link-light" href="cart.html"> ★ Избранное
                </a>
                <a id="enter" class="nav-link link-light me-3" href="login.html">Войти</a>
            </div>
        </div>
    </nav>
</header>

<div class="container">
    <aside class="sidebar">
        <ul>
            <h5 id="sidebar"></h5>
            <h5>
                <a href="catalog.html"
                   class="link-offset-2 link-light link-underline link-underline-opacity-0">Главная</a>
            </h5>
            <h5>
                <a href="catalog.html?popular=1"
                   class="link-offset-2 link-light link-underline link-underline-opacity-0">Популярные</a>
            </h5>
            <h5>
                <a href="catalog.html?best=1"
                   class="link-offset-2 link-light link-underline link-underline-opacity-0">Лучшие</a>
            </h5>

            <!-- Раскрывающийся список для категорий с индикатором -->
            <h5>
                <a href="#" class="link-offset-2 link-light link-underline link-underline-opacity-0 d-flex align-items-center" 
                   onclick="toggleCategories(event)">
                    Категории
                    <span id="categoryIndicator" class="ms-2">&#9662;</span>
                </a>
            </h5>
            <ul id="categoryList" style="display: none; padding-left: 20px;">
                <h5>
                    <a href="catalog.html?category=Классическая"
                       class="link-offset-2 link-light link-underline link-underline-opacity-0">Классические</a>
                </h5>
                <h5>
                    <a href="catalog.html?category=Стратегия"
                       class="link-offset-2 link-light link-underline link-underline-opacity-0">Стратегии</a>
                </h5>
                <h5>
                    <a href="catalog.html?category=Полукооперативная"
                       class="link-offset-2 link-light link-underline link-underline-opacity-0">Полукооператив</a>
                </h5>
            </ul>
            
            <h5 id="info"></h5>
        </ul>
    </aside>
</div>

<script>
    function performSearch() {
    const searchInput = document.getElementById("searchInput").value.trim();
    if (searchInput) {
        window.location.href = `catalog.html?id=${encodeURIComponent(searchInput)}`;
    }
    }

    document.getElementById("enterButton").addEventListener("click", performSearch);
    document.getElementById("searchForm").addEventListener("submit", function (event) {
        event.preventDefault();
        performSearch();
    });


    if (getCookieValue("role") === "ADMIN") {
    chandgePageElement('sidebar','Админ панель','admin_panel.html');
    chandgePageElement('info','Аналитика','info.html');
    }

    if (getCookieValue("role") === "ADMIN" || getCookieValue("role") === "USER") {
    chandgePageElement('enter','Профиль','profile.html');
    }

    if (window.location.pathname.endsWith("profile.html")) {
        chandgePageElement('enter','Выйти','logout.html');
        const divElement = document.querySelector(`#enter`);
    }

    function chandgePageElement(selector,name,href){
        const divElement = document.querySelector(`#${selector}`);
        divElement.innerHTML = "";
        const tag = document.createElement(`a`);
        tag.innerHTML = `${name}`;
        tag.href = `${href}`;
        tag.className = 'link-offset-2 link-light link-underline link-underline-opacity-0';
        divElement.appendChild(tag);
    }

    // Функция для показа/скрытия списка категорий с изменением индикатора
    function toggleCategories(event) {
        event.preventDefault();
        const categoryList = document.getElementById("categoryList");
        const indicator = document.getElementById("categoryIndicator");
        const isHidden = categoryList.style.display === "none";

        categoryList.style.display = isHidden ? "block" : "none";
        // Меняем стрелку: вниз (▼) или вверх (▲)
        indicator.innerHTML = isHidden ? "&#9652;" : "&#9662;";
    }
</script>